<!DOCTYPE html><html><head><meta http-equiv="Content-Security-Policy" content=" default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.gstatic.com https://www.googleapis.com https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net; img-src 'self' data: blob: https:; connect-src 'self' https://*.googleapis.com https://securetoken.googleapis.com https://identitytoolkit.googleapis.com https://*.firebaseio.com https://*.cloudinary.com https://api.ipify.org wss://*.firebaseio.com; font-src 'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com; frame-ancestors 'none'; base-uri 'self'; "><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Asset Management System</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link rel="stylesheet" href="style.min.css"><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js" defer="defer"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js" defer="defer"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js" defer="defer"></script><script src="lazy-loader.min.js" defer="defer"></script><script src="script.min.js" defer="defer"></script></head><body><div id="splashScreen" class="splash-screen"><i class="fas fa-cubes splash-icon"></i><h2 class="splash-title">Asset Management System</h2><p class="splash-status" id="splashStatus">Memulai aplikasi...</p><div class="loading splash-spinner"></div><p class="splash-detail" id="splashDetail">Inisialisasi database lokal...</p></div><div class="container hidden" id="mainContainer"><div class="header"><div class="header-top-row"><h1><i class="fas fa-cubes"></i> Asset Management System</h1><div class="header-actions"><div id="syncProgressIndicator"><div class="loading loading-sm"></div><span id="syncProgressText" class="sync-progress-text">Menyinkronkan</span> <span id="syncProgressPercent" class="sync-progress-percent">0%</span></div><div class="user-profile user-profile-sm" id="userProfile"><div class="user-avatar user-avatar-sm" id="userAvatar">U</div><div class="user-info"><div class="user-name user-name-sm" id="userName">User</div><div class="user-role user-role-sm" id="userRole">Role</div></div></div><button class="btn btn-success btn-small btn-sync-small" id="btnSyncNow"><i class="fas fa-sync"></i> Sync</button> <button class="theme-toggle theme-toggle-sm" id="themeToggle"><i class="fas fa-moon"></i></button></div></div><div class="header-badges"><div class="status-badge status-badge-sm" id="firebaseStatus"><i class="fas fa-cloud"></i> <span>Firebase: Terhubung</span></div><div class="status-badge status-badge-sm" id="indexeddbStatus"><i class="fas fa-database"></i> <span>DB Lokal: Siap</span></div><div class="status-badge status-badge-sm" id="cloudinaryStatus"><i class="fas fa-cloud-upload-alt"></i> <span>Cloudinary: Siap</span></div><div class="status-badge status-badge-sm" id="syncStatus"><i class="fas fa-sync-alt"></i> <span>Sync: Aktif</span></div></div></div><div id="globalAlertContainer"><div id="addAssetAlert" class="alert"></div></div><div class="nav-tabs"><div class="nav-tab active" data-tab="dashboard"><i class="fas fa-chart-line"></i> Dashboard</div><div class="nav-tab" data-tab="tambah"><i class="fas fa-plus-circle"></i> Tambah Item</div><div class="nav-tab" data-tab="daftar"><i class="fas fa-list"></i> Daftar Item</div><div class="nav-tab" data-tab="update"><i class="fas fa-edit"></i> Update Kondisi</div><div class="nav-tab" data-tab="galeri"><i class="fas fa-images"></i> Galeri Foto</div><div class="nav-tab" data-tab="backup"><i class="fas fa-download"></i> Backup & Export</div><div class="nav-tab" data-tab="settings"><i class="fas fa-cog"></i> Pengaturan</div></div><div class="tab-content active" id="dashboard-tab"><h2><i class="fas fa-chart-line"></i> Dashboard Analitik</h2><div class="dashboard-grid"><div class="dashboard-card"><h3>Total Item</h3><div class="value" id="totalAssets">0</div><div class="subtext">Jumlah semua item</div><div class="stats-grid"><div class="stat-item"><div class="stat-value" id="assetCount">0</div><div class="stat-label">Asset</div></div><div class="stat-item"><div class="stat-value" id="nonAssetCount">0</div><div class="stat-label">Non-Asset</div></div><div class="stat-item"><div class="stat-value" id="totalJumlah">0</div><div class="stat-label">Total Unit</div></div></div></div><div class="dashboard-card"><h3>Kondisi Item</h3><div class="value" id="baikCount">0</div><div class="subtext">Item dalam kondisi baik</div><div class="stats-grid"><div class="stat-item"><div class="stat-value" id="rusakCount">0</div><div class="stat-label">Rusak</div></div><div class="stat-item"><div class="stat-value" id="MutasiCount">0</div><div class="stat-label">Mutasi</div></div><div class="stat-item"><div class="stat-value" id="totalPhotos">0</div><div class="stat-label">Total Foto</div></div></div></div><div class="dashboard-card"><h3>Sinkronisasi</h3><div class="value" id="syncedAssets">0</div><div class="subtext">Item tersinkronisasi</div><div class="stats-grid"><div class="stat-item"><div class="stat-value" id="pendingSync">0</div><div class="stat-label">Asset Pending</div></div><div class="stat-item"><div class="stat-value" id="pendingPhotosCount">0</div><div class="stat-label">Foto Pending</div></div><div class="stat-item"><div class="stat-value" id="lastSync">-</div><div class="stat-label">Terakhir Sync</div></div></div></div><div class="dashboard-card"><h3>Lokasi Item</h3><div class="value" id="totalLokasi">0</div><div class="subtext">Jumlah lokasi berbeda</div><div id="lokasiStats" class="lokasi-stats"></div></div></div><div class="charts-container"><div class="chart-card"><h3>Distribusi Jenis Item</h3><div class="chart-container"><canvas id="typeChart"></canvas></div></div><div class="chart-card"><h3>Distribusi Kondisi Item</h3><div class="chart-container"><canvas id="conditionChart"></canvas></div></div></div><div class="chart-card"><h3>Aktivitas Terkini</h3><div id="recentActivity"><div class="empty-state empty-state-sm"><i class="fas fa-history"></i><p>Belum ada aktivitas</p></div></div></div></div><div class="tab-content" id="tambah-tab"><h2><i class="fas fa-plus-circle"></i> Tambah Item Baru</h2><form id="addAssetForm"><div class="form-row"><div class="form-col"><label for="jenis_item">Jenis Item *</label> <select id="jenis_item" required><option value="">Pilih Jenis Item</option><option value="asset">Asset</option><option value="non-asset">Non-Asset</option></select></div><div class="form-col hidden" id="jumlahContainer"><label for="jumlah">Jumlah *</label> <input type="number" id="jumlah" min="1" value="1"></div></div><div class="form-row"><div class="form-col"><label for="nama_asset">Nama Item *</label> <input id="nama_asset" required placeholder="Nama asset/non-asset"></div><div class="form-col"><label for="material_kode">Kode Material *</label> <input id="material_kode" required></div></div><div class="form-row"><div class="form-col"><label for="no_rs">No. Reservation Slip (RS) *</label> <input id="no_rs" required></div><div class="form-col"><label for="no_po">No. Purchase Order / POA</label> <input id="no_po" placeholder="PO atau POA (opsional)"></div></div><div class="form-group" id="noAssetGroup"><label>No Asset (Opsional)</label> <input id="no_asset" placeholder="Nomor asset internal"></div><div class="form-row"><div class="form-col"><label for="lokasi">Lokasi *</label> <input list="lokasi-list" id="lokasi" name="lokasi" placeholder="Pilih atau ketik lokasi" required><datalist id="lokasi-list"><option value="Main Workshops"></option><option value="Gudang Office"></option><option value="Workshops Tyre"></option><option value="Workshops Track"></option><option value="Workshops Welder"></option><option value="Workshops Maintenance"></option><option value="Workshops DT"></option><option value="Workshops wheel"></option><option value="Pit stop"></option><option value="other">Lainnya (Ketik manual)...</option></datalist><input id="customLokasi" class="custom-lokasi" placeholder="Ketik lokasi baru"></div><div class="form-col"><label for="kondisi">Kondisi Awal *</label> <select id="kondisi" required><option value="">Pilih Kondisi</option><option value="baik">Baik</option><option value="rusak">Rusak</option><option value="Mutasi">Mutasi</option></select></div></div><div class="form-row"><div class="form-col"><label for="foto_utama">Foto Utama (Max 5MB) *</label> <input type="file" id="foto_utama" accept="image/*" required multiple="multiple"> <small>Foto item dalam kondisi saat ini (bisa multiple)</small><div id="photoPreview" class="photo-preview photo-preview-mt-10"></div></div></div><div class="form-group"><label for="catatan_awal">Catatan Awal (Opsional)</label> <textarea id="catatan_awal" rows="3" placeholder="Catatan tentang kondisi awal item..."></textarea></div><div class="form-group"><button type="button" class="btn btn-primary" id="btnPreview"><i class="fas fa-eye"></i> Preview Data</button> <button type="submit" class="btn btn-success" id="btnTambahAsset"><i class="fas fa-save"></i> Simpan Item</button> <button type="reset" class="btn btn-outline"><i class="fas fa-redo"></i> Reset Form</button></div></form></div><div class="tab-content" id="daftar-tab"><h2><i class="fas fa-list"></i> Daftar Item</h2><button class="btn btn-success btn-small" id="btnOpenWaReport"><i class="fab fa-whatsapp"></i> Kirim WA</button><div class="form-row"><div class="form-col"><input id="searchAsset" placeholder="Cari berdasarkan nama, kode, RS, atau lokasi..."></div><div class="form-col"><select id="filterJenis"><option value="">Semua Jenis</option><option value="asset">Asset</option><option value="non-asset">Non-Asset</option></select></div><div class="form-col"><select id="filterKondisi"><option value="">Semua Kondisi</option><option value="baik">Baik</option><option value="rusak">Rusak</option><option value="Mutasi">Mutasi</option></select></div><div class="form-col"><select id="filterLokasi"><option value="">Semua Lokasi</option><option value="Main Workshops">Main Workshops</option><option value="Gudang Office">Gudang Office</option><option value="Workshops Tyre">Workshops Tyre</option><option value="Workshops Track">Workshops Track</option><option value="Workshops Welder">Workshops Welder</option><option value="Workshops Maintenance">Workshops Maintenance</option><option value="Workshops DT">Workshops DT</option><option value="Workshops wheel">Workshops wheel</option><option value="Pit stop">Pit stop</option></select></div></div><div class="form-row filter-foto-row"><div class="form-col"><select id="filterFoto"><option value="">Semua Item (Dengan/Tanpa Foto)</option><option value="with-photos">✓ Dengan Foto</option><option value="without-photos">✗ Tanpa Foto</option></select></div><div class="form-col"></div><div class="form-col"></div><div class="form-col"></div></div><div id="assetsList"><div class="empty-state"><i class="fas fa-cubes"></i><h3>Belum ada item</h3><p>Tambahkan item baru untuk mulai mengelola</p></div></div></div><div class="tab-content" id="update-tab"><h2><i class="fas fa-edit"></i> Update Kondisi Item</h2><div id="updateAlert" class="alert hidden"></div><div class="form-group"><label for="assetSelect">Pilih Item *</label> <select id="assetSelect" required><option value="">Pilih item untuk update kondisi</option></select></div><div id="assetInfo" class="hidden"><div class="asset-card"><div class="asset-header"><div><div class="asset-title" id="updateAssetName"></div><div class="asset-subtitle">Material Code : <span id="updateAssetCode"></span> | No RS : <span id="updateAssetCodeRs"></span> | No Asset : <span id="updateAssetNo"></span> | Lokasi : <span id="updateAssetLocation"></span> | Jenis: <span id="updateAssetJenis"></span> | Kondisi: <span id="updateAssetCondition"></span></div></div><div id="updateAssetBadge"></div></div><div class="photo-preview" id="updateAssetPhotos"></div></div><form id="updateConditionForm"><div class="form-row"><div class="form-col"><label for="newLokasi">Lokasi Baru (Opsional)</label> <select id="newLokasi"><option value="">Pilih Lokasi</option><option value="Main Workshops">Main Workshops</option><option value="Gudang Office">Gudang Office</option><option value="Workshops Tyre">Workshops Tyre</option><option value="Workshops Track">Workshops Track</option><option value="Workshops Welder">Workshops Welder</option><option value="Workshops Maintenance">Workshops Maintenance</option><option value="Workshops DT">Workshops DT</option><option value="Workshops wheel">Workshops wheel</option><option value="Pit stop">Pit stop</option><option value="other">Lainnya (Ketik manual)...</option></select> <input id="customLokasiUpdate" class="custom-lokasi-update" placeholder="Ketik lokasi baru"></div><div class="form-col"><label for="newCondition">Kondisi Baru *</label> <select id="newCondition" required><option value="">Pilih Kondisi Baru</option><option value="baik">Baik</option><option value="rusak">Rusak</option><option value="Mutasi">Mutasi</option></select></div><div id="nonAssetMutationBox" class="hidden"><h4>Perubahan Kondisi Asset</h4><div class="form-row"><div class="form-col"><label>Kondisi Asal *</label> <select id="mutationFrom"><option value="">Pilih kondisi asal</option><option value="baik">Baik</option><option value="rusak">Rusak</option><option value="Mutasi">Mutasi</option></select></div><div class="form-col"><label>Kondisi Tujuan *</label> <select id="mutationTo"><option value="">Pilih kondisi tujuan</option><option value="baik">Baik</option><option value="rusak">Rusak</option><option value="Mutasi">Mutasi</option></select></div></div><div class="form-group"><label>Jumlah Dipindahkan</label> <input type="number" id="mutationQty" min="1" placeholder="Isi jika ada perubahan kondisi"> <small>Kosongkan jika hanya update lokasi / catatan</small></div></div></div><div class="form-row"><div class="form-col"><label for="updateFoto">Foto Kondisi Baru (Max 5MB)</label> <input type="file" id="updateFoto" accept="image/*"> <small>Foto untuk mendokumentasikan perubahan kondisi</small></div></div><div class="form-group"><label for="updateCatatan">Catatan Perubahan *</label> <textarea id="updateCatatan" rows="3" placeholder="Jelaskan perubahan kondisi, penyebab, atau tindakan yang dilakukan..." required></textarea></div><div class="form-group"><button type="submit" class="btn btn-warning" id="btnUpdateCondition"><i class="fas fa-sync-alt"></i> Update Kondisi</button></div></form></div></div><div class="tab-content" id="galeri-tab"><h2><i class="fas fa-images"></i> Galeri Foto Item</h2><div class="form-group"><label for="galeriAssetSelect">Pilih Item</label> <select id="galeriAssetSelect"><option value="">Semua Item</option></select></div><div class="form-group"><label for="filterPhotoSource">Sumber Foto</label> <select id="filterPhotoSource"><option value="">Semua Sumber</option><option value="local">Lokal (IndexedDB)</option><option value="cloudinary">Cloudinary</option></select></div><div id="galleryContainer"><div class="empty-state"><i class="fas fa-images"></i><h3>Belum ada foto</h3><p>Foto akan ditampilkan setelah item ditambahkan</p></div></div></div><div class="tab-content" id="backup-tab"><h2><i class="fas fa-download"></i> Backup, Restore & Export</h2><div class="form-row"><div class="form-col"><h3><i class="fas fa-file-archive"></i> Backup Data</h3><p>Backup semua data ke file ZIP (termasuk Excel).</p><div id="backupInfo" class="alert alert-info"><i class="fas fa-info-circle"></i> Backup akan berisi:<ul class="ml-20 mt-5"><li>Data asset/non-asset</li><li>Semua foto</li><li>File Excel export</li></ul></div><button class="btn btn-primary" id="btnBackup"><i class="fas fa-file-archive"></i> Buat Backup ZIP</button> <button class="btn btn-success" id="btnExportAllData"><i class="fas fa-file-excel"></i> Export All Data</button></div><div class="form-col"><h3><i class="fas fa-upload"></i> Import Data</h3><p>Import data dari file ZIP (full data) atau Excel (massal).</p><div id="importAlert" class="alert hidden"></div><div class="file-upload" id="importDropzone"><i class="fas fa-cloud-upload-alt file-upload-icon"></i><h3>Seret file ke sini</h3><p>Support: ZIP (.zip) untuk full data + foto | Excel (.xlsx) untuk data massal</p><input type="file" id="importFile" accept=".zip,.xlsx" class="file-upload-input"></div><div class="import-info-box"><div class="flex gap-15 items-center"><div class="flex-1 text-center p-10 border-right"><i class="fas fa-file-archive text-warning fs-20"></i><div><strong>ZIP</strong></div><small>Full data + foto</small></div><div class="flex-1 text-center p-10"><i class="fas fa-file-excel text-success fs-20"></i><div><strong>Excel</strong></div><small>Data massal</small></div></div></div><button class="btn btn-warning btn-w-100 hidden" id="btnImport"><i class="fas fa-file-import"></i> Preview & Import Data</button><div class="mt-20 pt-15 border-top"><div class="flex gap-10 items-center"><i class="fas fa-download text-primary"></i> <span class="flex-1">Butuh template Excel?</span> <button id="btnExportTemplate" class="btn btn-outline btn-small"><i class="fas fa-file-excel"></i> Download Template</button></div></div></div></div><div class="form-group mt-30"><h3><i class="fas fa-history"></i> Riwayat Backup & Export</h3><div id="backupHistory"><div class="empty-state empty-state-sm"><i class="fas fa-history"></i><p>Belum ada riwayat backup</p></div></div></div></div><div class="tab-content" id="settings-tab"><h2><i class="fas fa-cog"></i> Pengaturan Aplikasi</h2><div class="settings-grid"><div class="setting-card"><h3><i class="fas fa-cloud-upload-alt"></i> Cloudinary</h3><div class="setting-item"><div class="setting-label">Status</div><div class="status-badge status-online" id="cloudinarySettingsStatus"><i class="fas fa-check-circle"></i> Selalu Aktif</div><div class="setting-description">Foto otomatis diupload ke Cloudinary saat online</div></div><button class="btn btn-outline btn-small" id="testCloudinary"><i class="fas fa-wifi"></i> Test Koneksi</button></div><div class="setting-card"><h3><i class="fas fa-sync-alt"></i> Sinkronisasi</h3><div class="setting-item"><div class="setting-label">Auto Sync</div><label class="toggle-switch"><input type="checkbox" id="autoSync" checked="checked"> <span class="toggle-slider"></span></label><div class="setting-description">Sinkronisasi otomatis saat online</div></div><div class="setting-item"><div class="setting-label">Sync Interval</div><select id="syncInterval"><option value="30000">30 detik</option><option value="60000" selected="selected">1 menit</option><option value="300000">5 menit</option><option value="900000">15 menit</option></select><div class="setting-description">Interval sinkronisasi otomatis</div></div><div class="setting-item"><div class="setting-label">Terakhir Sync</div><div id="lastSyncTime" class="text-primary fw-600">Belum pernah</div></div><div class="setting-item"><div class="setting-label">Status Koneksi</div><div id="syncStatusInfo" class="fs-13"><span id="firebaseStatusText">Mengecek...</span><br><span id="cloudinaryStatusText">Mengecek...</span></div></div></div><div class="setting-card"><h3><i class="fas fa-database"></i> Penyimpanan</h3><div class="setting-item"><div class="setting-label">Penyimpanan Lokal</div><div id="localStorageInfo"><div class="progress-bar progress-bar-sm"><div id="storageProgress" class="progress-bar-fill"></div></div><div class="flex justify-between fs-12"><span id="storageUsedText">0 MB</span> <span id="storageTotalText">-</span></div><div id="storagePercent" class="text-center fw-600 mt-5">0%</div></div></div><div class="setting-item"><div class="setting-label">Kompresi Foto</div><label class="toggle-switch"><input type="checkbox" id="enableCompression" checked="checked"> <span class="toggle-slider"></span></label><div class="setting-description">Kompresi otomatis (1280px, quality 0.7)</div></div><div class="setting-item"><div class="setting-label">Ukuran Maks Foto</div><select id="maxPhotoSize"><option value="2">2 MB</option><option value="5" selected="selected">5 MB</option><option value="10">10 MB</option></select><div class="setting-description">Ukuran maksimal per file foto</div></div><div class="setting-item"><div class="setting-label">Manajemen Foto</div><div class="form-row"><select id="photoStorageMode"><option value="optimized">Optimized (Rekomendasi)</option><option value="thumbnail">Thumbnail Only (Hemat)</option><option value="full">Full Quality (Boros)</option></select></div><div class="setting-description">Mode thumbnail: simpan versi kecil untuk preview</div><button class="btn btn-outline btn-small" id="btnRunFullCleanup"><i class="fas fa-broom"></i> Bersihkan Foto Lama</button></div><div id="ownerSettings"><div class="setting-item"><div class="setting-label">Reset Semua Data</div><div class="form-row mt-10"><input type="password" id="resetPassword" placeholder="Masukkan sandi:" class="reset-password-input"> <button class="btn btn-danger btn-small" id="resetAllData"><i class="fas fa-trash"></i> Reset</button></div><div class="setting-description warning">⚠️ Hapus SEMUA data (lokal & cloud) - Hanya Owner</div></div></div><div class="setting-item"><button class="btn btn-outline btn-small" id="clearLocalData"><i class="fas fa-trash-alt"></i> Hapus Data Lokal / Reset</button><div class="setting-description">Hanya hapus data dari browser ini</div></div></div><div class="setting-card"><h3><i class="fas fa-history"></i> Backup & Restore</h3><div class="setting-item"><div class="setting-label">Riwayat Backup</div><div id="backupCount" class="fw-600">0 backup tersimpan</div></div></div></div><div class="setting-card mt-20"><h3><i class="fas fa-info-circle"></i> Informasi Aplikasi</h3><div class="form-row"><div class="form-col"><div class="setting-label">Versi</div><div id="appVersion" class="fw-600">3.7.0</div><div class="setting-label">Build Date</div><div id="buildDate" class="fw-600">22 Februari 2026</div><div class="setting-label">Build Code</div><div class="font-mono fs-13 text-primary">370</div></div><div class="form-col"><div class="setting-label">Pengguna</div><div id="currentUserName" class="fw-600">-</div><div class="setting-label">Role</div><div id="currentUserRole" class="fw-600">-</div><div class="setting-label">Login</div><div id="currentUserLogin" class="fs-12 text-secondary">-</div></div></div><div class="mt-15"><div class="setting-label">Fitur Utama</div><div class="fs-12 text-secondary lh-15">• Asset & Non-Asset Management • IndexedDB Local Storage • • Firebase Sync • Cloudinary Auto-Upload • • Backup ZIP • Export Excel • Dark Mode • • User Authentication • Activity Logging</div></div></div></div><div class="modal" id="assetDetailModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">Detail Item</div><div class="modal-header-actions"><button class="btn btn-outline btn-small btn-icon-sm" id="printAssetDetail" title="Print"><i class="fas fa-print"></i></button> <button class="btn btn-outline btn-small btn-icon-sm" id="shareAssetDetail" title="Share"><i class="fas fa-share-alt"></i></button> <span class="close-modal close-modal-lg" id="closeAssetDetail">&times;</span></div></div><div id="assetDetailContent"></div></div></div><div class="modal" id="photoModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">Foto Item</div><span class="close-modal" id="closePhotoModal">&times;</span></div><div id="photoModalContent" class="text-center"><img id="largePhoto" src="" alt="Foto Item" class="img-fluid"><div id="photoInfo" class="mt-15"></div></div></div></div><div class="modal" id="cloudinaryUploadModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">Upload ke Cloudinary</div><span class="close-modal" id="closeCloudinaryModal">&times;</span></div><div id="cloudinaryUploadContent" class="p-20"><div id="uploadProgress" class="empty-state"><i class="fas fa-cloud-upload-alt"></i><h3>Mengupload foto...</h3><div class="progress-bar"><div id="uploadProgressBar" class="progress-bar-fill"></div></div><p id="uploadStatus">Memulai upload...</p></div></div></div></div><div class="modal" id="waReportModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">Preview Laporan WA</div><span class="close-modal" id="closeWaModal">&times;</span></div><div class="mb-15"><button class="btn btn-outline btn-small" id="btnWaSimple">Simple</button> <button class="btn btn-outline btn-small" id="btnWaFull">Full</button></div><textarea id="waPreview" class="w-100 h-300"></textarea><div class="mt-15"><button class="btn btn-success btn-small" id="btnSendWA">Kirim WA</button> <button class="btn btn-primary btn-small" id="btnCopyReport">Salin</button></div><div id="waWarning" class="text-danger mt-10"></div></div></div><div class="modal" id="previewModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">Preview Data Sebelum Save</div><span class="close-modal" id="closePreviewModal">&times;</span></div><div id="previewContent" class="p-20"></div><div class="modal-footer"><div class="form-row"><div class="form-col"><label>Foto Preview:</label><div id="finalPhotoPreview" class="photo-preview"></div></div></div><div class="form-group mt-20"><button class="btn btn-success" id="confirmSave"><i class="fas fa-check"></i> Konfirmasi & Simpan</button> <button class="btn btn-outline" id="cancelSave"><i class="fas fa-times"></i> Kembali ke Form</button></div></div></div></div><div class="modal" id="resetModal"><div class="modal-content"><div class="modal-header"><div class="modal-title">Reset Semua Data</div><span class="close-modal" id="closeResetModal">&times;</span></div><div id="resetModalContent" class="p-20"><div class="alert alert-warning"><i class="fas fa-exclamation-triangle"></i> <strong>PERINGATAN!</strong> Tindakan ini akan menghapus:<ul class="ml-20 mt-10"><li>Semua data lokal (IndexedDB)</li><li>Semua data di Firebase Firestore</li><li>Semua foto di Cloudinary</li></ul><p class="mt-10">Tindakan ini tidak dapat dibatalkan!</p></div><div class="form-group"><label for="confirmResetPassword">Masukkan sandi konfirmasi:</label> <input type="password" id="confirmResetPassword" placeholder="" class="form-control"></div><div class="form-group"><button class="btn btn-danger" id="confirmResetAll"><i class="fas fa-trash"></i> HAPUS SEMUA DATA</button> <button class="btn btn-outline" id="cancelReset"><i class="fas fa-times"></i> Batal</button></div></div></div></div></div><div class="login-overlay" id="loginOverlay"><div class="login-container"><div class="login-header"><h1><i class="fas fa-cubes"></i> Asset Management</h1><p>Silakan login untuk mengakses sistem</p></div><div class="login-tabs"><div class="login-tab active" data-form="login">Login</div><div class="login-tab" data-form="register">Register</div></div><form class="login-form active" id="loginForm"><div id="loginError" class="login-error"></div><div id="loginSuccess" class="login-success"></div><div class="login-input-group"><label for="loginEmail">Email</label><div class="input-with-icon"><i class="fas fa-envelope"></i> <input type="email" id="loginEmail" placeholder="nama@perusahaan.com" required></div></div><div class="login-input-group"><label for="loginPassword">Password</label><div class="input-with-icon"><i class="fas fa-lock"></i> <input type="password" id="loginPassword" placeholder="Masukkan password" required></div></div><div class="login-options"><label class="remember-me"><input type="checkbox" id="rememberMe"> <span>Ingat saya</span></label> <a href="#" class="forgot-password" id="forgotPassword">Lupa password?</a></div><button type="submit" class="login-btn" id="btnLogin"><i class="fas fa-sign-in-alt"></i> Login</button><div class="switch-form">Belum punya akun? <a href="#" data-form="register">Daftar sekarang</a></div></form><form class="login-form" id="registerForm"><div id="registerError" class="login-error"></div><div id="registerSuccess" class="login-success"></div><div class="login-input-group"><label for="registerNama">Nama Lengkap *</label><div class="input-with-icon"><i class="fas fa-user"></i> <input id="registerNama" placeholder="Nama lengkap" required></div></div><div class="login-input-group"><label for="registerJabatan">Jabatan *</label><div class="input-with-icon"><i class="fas fa-briefcase"></i> <input id="registerJabatan" placeholder="Jabatan di perusahaan" required></div></div><div class="login-input-group"><label for="registerNIK">NIK (Nomor Induk Karyawan) *</label><div class="input-with-icon"><i class="fas fa-id-card"></i> <input id="registerNIK" placeholder="Nomor induk karyawan" required></div></div><div class="login-input-group"><label for="registerEmail">Email *</label><div class="input-with-icon"><i class="fas fa-envelope"></i> <input type="email" id="registerEmail" placeholder="email@perusahaan.com" required></div></div><div class="login-input-group"><label for="registerPassword">Password *</label><div class="input-with-icon"><i class="fas fa-lock"></i> <input type="password" id="registerPassword" placeholder="Minimal 6 karakter" required minlength="6"></div></div><div class="login-input-group"><label for="registerConfirmPassword">Konfirmasi Password *</label><div class="input-with-icon"><i class="fas fa-lock"></i> <input type="password" id="registerConfirmPassword" placeholder="Ulangi password" required></div></div><button type="submit" class="login-btn" id="btnRegister"><i class="fas fa-user-plus"></i> Daftar Akun</button><div class="switch-form">Sudah punya akun? <a href="#" data-form="login">Login disini</a></div></form></div></div><div class="modal" id="zipImportModal"><div class="modal-content modal-content-lg"><div class="modal-header"><div class="modal-title"><i class="fas fa-file-import"></i> Preview Import ZIP <span id="zipPreviewStats" class="fs-14 ml-15"></span></div><span class="close-modal" id="closeZipPreview">&times;</span></div><div id="zipPreviewTabs"><div class="zip-tab active" data-tab="assets"><i class="fas fa-cubes"></i> Data Item</div><div class="zip-tab" data-tab="photos"><i class="fas fa-images"></i> Foto</div><div class="zip-tab" data-tab="conflicts"><i class="fas fa-exclamation-triangle"></i> Konflik</div></div><div id="zipPreviewContainer"></div><div class="mt-20 pt-15 border-top"><div class="flex gap-10 justify-end"><button class="btn btn-success" id="btnConfirmZipImport"><i class="fas fa-check"></i> Import Data</button> <button class="btn btn-outline" id="btnCancelZipPreview"><i class="fas fa-times"></i> Batal</button></div></div></div></div><div class="loading-overlay" id="loadingOverlay"><div class="loading-spinner"></div><p id="loadingText">Memproses...</p></div><div class="user-dropdown" id="userDropdown"><div class="dropdown-header"><div class="dropdown-user-info"><div class="dropdown-avatar" id="dropdownAvatar">U</div><div class="dropdown-user-details"><h3 id="dropdownName">User Name</h3><p id="dropdownEmail">user@email.com</p><p id="dropdownJabatan">-</p><p id="dropdownNIK">-</p><span class="user-role-badge" id="dropdownRole">User</span></div></div></div><div class="dropdown-menu"><a href="#" class="dropdown-item" id="btnProfile"><i class="fas fa-user"></i> Profil Saya </a><a href="#" class="dropdown-item" id="btnChangePassword"><i class="fas fa-key"></i> Ubah Password </a><a href="#" class="dropdown-item" id="btnUserManagement"><i class="fas fa-users-cog"></i> Manajemen User</a><div class="dropdown-divider"></div><a href="#" class="dropdown-item logout" id="btnLogout"><i class="fas fa-sign-out-alt"></i> Logout</a></div></div><div id="importPreviewModal" class="modal"><div class="modal-content modal-content-lg"><div class="modal-header"><h3>Preview Import Data</h3><button id="closeImportPreviewBtn" class="btn-close">×</button></div><div class="modal-body"><div id="importPreviewContainer"></div></div><div class="modal-footer"><button id="btnSaveImportedData" class="btn btn-success"><i class="fas fa-save"></i> Simpan Semua</button> <button id="btnCancelImportPreview" class="btn btn-secondary">Batal</button></div></div></div><div class="progress-overlay" id="progressOverlay"><div class="progress-content"><div class="progress-header"><h3 id="progressTitle">Menyimpan Data</h3><p id="progressSubtitle">Mohon tunggu...</p></div><div class="progress-steps" id="progressSteps"></div><div class="progress-bar-container"><div class="overlay-progress-bar"><div class="overlay-progress-fill" id="progressFill"></div></div><div class="progress-text" id="progressText">0%</div></div><div id="progressError" class="progress-error"></div><div class="progress-actions"><button class="btn btn-danger" id="btnCancelProgress"><i class="fas fa-times"></i> Batalkan</button> <button class="btn btn-outline" id="btnCloseProgress"><i class="fas fa-times"></i> Tutup</button></div></div></div></body></html>
